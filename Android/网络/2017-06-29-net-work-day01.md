---
title: 《图解HTTP》第1、2章
date: 2017-06-29
tags: 网络
categories: NetWork
---
#### tcp/ip的分层管理 ####

- 应用层 http、ftp、dns
- 传输层 tcp-提供可靠的字节流服务、udp
- 网络层 ip协议，作用是把各种数据包传送给对方
- 数据链路层 硬件相关

#### tcp/ip通信传输流 ####

利用TCP/IP协议进行网络通信时，会通过分层顺序与对方进行通信。发送端从应用层往下走，接收端从数据链路层往上走。假下如图是客户端想要看某个web页面的http请求：

![通信传输流](../res/img/tcp-ip通信传输流.png)

- 在应用层，使用HTTP协议，发出请求，此处会先请求DNS服务，获取请求网址对应的IP地址
- 在传输层(TCP协议)，把从应用层处收到的数据(HTTP请求报文)进行分割，并在各个报文段上打上标记序号及端口号后[可靠地]转发给网络层
- 在网络层(IP协议)，增加做为通信目的地的MAC地址后转发给链路层，接收端的服务器在链路层收到数据，按序往上层发送直至应用层

发送端在层与层之间传输数据时，没经过一层必定会被打上一个该层所属的首部信息。在接收端则反之。


#### TCP三次握手 ####

- 发送端发送待遇SYN的数据包
- 接收端接收到后，发送带有SYN/ACK标志的数据包表示确认信息
- 发送端再回传一个带有ACK的数据包，代表“握手”结束
- 如果在握手过程中某个阶段中断，TCP协议会再次以相同的顺序发送相同的数据包
 
#### http 方法 ####

- get
- post
- delete
- put
- header
- options
- trace
- connect
- link 1.0
- unlink 1.0

#### HTTP 持久链接 ####

![持久连接](../res/img/HTTP持久连接.png)

keep-alive,只要任意一端没有明确提出断开连接，则保持TCP连接状态。
HTTP/1.1中，连接默认是持久连接
HTTP是无状态的协议，可以使用Cookie来保存状态