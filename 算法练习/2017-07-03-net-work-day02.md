---
title: 《图解HTTP》第3、4章
date: 2017-07-03
tags: 网络
categories: NetWork
---

#### HTTP报文 ####

- 使用HTTP协议进行交互的信息称为HTTP报文，有请求报文、响应报文两种
- 报文大致可分为报文首部和报文主体两块，两者由一个空行隔开，报文主体不一定有
- 请求行：包含用于请求的方法，请求URI和HTTP版本
- 状态行：包含表明响应结果的状态码，原因短语和HTTP版本
- 首部字段：包含表示请求和响应的各种条件和属性的各类首部
- 其他：可能包含HTTP的RFC里未定义的首部，如Cookie等


#### 内容协商 ####

内容协商机制是指客户端和服务端就响应的资源内容进行交涉，然后提供给客户端最为适合的资源。内容协商会以响应资源的语言、字符集、编码方式等做为判断的基准。

- 服务器驱动协商：由服务端进行内容协商。以请求的首部字段为参考，在服务端自动处理。但对用户来说，以浏览器发送的信息做为判定的依据，并不一定能筛选出最优内容
- 客户端驱动协商：由客户端进行内容协商的方式。用户从浏览器显示的可选项列表中手动选择。还可以利用JavaScript脚本在Web页面上自动进行上述选择。比如按OS的类型或浏览器类型，自行切换成PC版页面或手机版页面。
- 透明协商：是服务器驱动和客户端驱动的结合体，是由服务器端和客户端各自进行内容协商的一种方法。

#### 常用的14个HTTP状态码 ####

##### 2xx成功 #####
- 200 从客户端发来的请求在服务端被正常处理的
- 204 请求已经成功处理，但在返回的响应报文中不含实体的主体部分，另外，也不允许返回任何实体的主体，比如浏览器请求，返回204，那么浏览器页面不发生更新
- 206 客户端进行了范围请求，服务器成功执行了。响应报文中包含由Content-Range指定范围的实体内容

##### 3xx 重定向 #####

- 301 永久性重定向。请求的资源已被分配了新的URI，以后应使用资源现在所指的URI
- 302 临时性重定向
- 303 由于请求对应的资源存在着另一个URI，应使用GET方法定向获取请求的资源
- 304 客户端发送附带条件的请求时，服务端允许请求访问资源，但未满足条件的情况。304和重定向没有关系
- 307 临时性重定向

##### 4xx 客户端错误 #####

- 400 请求报文中存在语法错误，需要修改请求的内容后再次发送请求
- 401 表示发送的请求需要有通过HTTP认证，如果之前已经进行过一次请求，则表示用户认证失败，当浏览器初次接收到401响应，会弹出认证用的对话窗口
- 403 请求资源的访问被服务器拒绝
- 404 无法找到请求的资源，也可以在403时拒绝请求且不想说明理由时使用

##### 5xx 服务器错误 #####

- 500 服务端在执行请求时发生了错误
- 503 服务器暂时处于超负载或正在进行停机维护，现在无法处理请求


 